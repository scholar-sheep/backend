(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[8],{"255cf":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("q-page",{staticClass:"column"},[e("div",{staticClass:"row col",staticStyle:{height:"50%"}},[e("div",{staticClass:"col-9 message"},[e("q-card",{staticClass:"my-card",attrs:{dark:"",bordered:""}},[e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-10"},[e("div",{staticClass:"text-h4"},[t._v(t._s(t.info["姓名"]))]),e("div",{staticClass:"text-subtitle1"},[t._v(t._s(t.info["职称"]))])]),e("div",{staticClass:"col-2"},[e("p",[t.followed||t.owner?t._e():e("q-btn",{attrs:{color:"primary",icon:"playlist_add",label:"关注",size:"md"},on:{click:function(a){return t.follow()}}}),!t.owner&&t.followed?e("q-btn",{attrs:{color:"primary",icon:"playlist_add",label:"取消关注",size:"md"},on:{click:function(a){return t.unFollow()}}}):t._e()],1)])])]),e("q-separator",{attrs:{dark:"",inset:""}}),e("q-card-section",[e("div",[e("q-list",{attrs:{dark:"",separator:""}},[e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[e("q-item-section",{on:{click:function(a){return t.toOrg()}}},[e("q-item-label",{staticClass:"text-subtitle1"},[t._v("单位")]),e("q-item-label",{attrs:{caption:""}},[e("p",[t._v(t._s(t.info["机构"]))])])],1)],1),e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""}},[e("q-item-section",[e("q-item-label",{staticClass:"text-subtitle1"},[t._v("领域")]),t._l(t.info.领域,(function(a){return e("q-item-label",{key:a.t,attrs:{caption:""}},[e("span",[t._v(t._s(a.t)+",")])])}))],2)],1)],1)],1)])],1)],1),e("div",{staticClass:"col-3 data"},[e("q-card",{staticClass:"my-card",attrs:{bordered:""}},[e("q-card-section",{staticClass:"items-center"},[e("div",{staticClass:"text-center"},[e("a-statistic",{attrs:{title:"共有成果",value:t.info.成果数,suffix:"篇",valueStyle:"{font-size:'30px'}"}}),e("a-statistic",{attrs:{title:"总被引",value:t.info["引用数"],suffix:"次"}}),e("a-statistic",{attrs:{title:"共有",value:t.info["关注人数"],suffix:"人关注了ta"}})],1)])],1)],1)]),e("div",{staticClass:"row col"},[e("div",{staticClass:"col-6 contents"},[e("q-card",{staticClass:"my-card",attrs:{bordered:""}},[e("q-card-section",[e("div",{staticClass:"row"},[e("div",{staticClass:"text-h6 col-10"},[t._v("论文列表")]),e("div",{staticClass:"col-2"},[e("p",[t.owner?e("q-btn",{attrs:{color:"primary",icon:"create",label:"编辑",size:"md"},on:{click:function(a){t.edit=!0}}}):t._e(),t.owner?t._e():e("q-btn",{attrs:{color:"primary",icon:"create",label:"认领",size:"md"},on:{click:function(a){return t.apply()}}}),e("admin-form",{attrs:{edit:t.edit,papers:t.papers,expId:this.expId},on:{closeDialog:t.closeDialog,init:t.init}})],1)])])]),e("q-separator",{attrs:{inset:""}}),e("q-card-section",[e("div",[e("q-list",{attrs:{separator:""}},[e("q-scroll-area",{staticStyle:{height:"300px"}},t._l(t.papers,(function(a){return e("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:a.id,attrs:{clickable:""}},[e("q-item-section",{on:{click:function(e){return t.toPaper(a.id)}}},[t._v(t._s(a.title))])],1)})),1)],1)],1)])],1)],1),e("div",{staticClass:"col-6 network"},[e("q-card",{staticClass:"my-card",attrs:{dark:"",bordered:""}},[e("q-card-section",[e("div",{staticStyle:{width:"100%",height:"400px"},attrs:{id:"myChart"}})])],1)],1)])])},s=[],o=(e("b0c0"),e("2fce")),n=e.n(o),r=e("4ec3"),l={name:"hello",data:function(){return{msg:"Welcome to Your Vue.js App",followed:!1,owner:!1,edit:!1,expId:"",info:{"姓名":"Scholar Name","职称":"Professor","机构":"Organization Name","领域":[{t:"计算机",w:.3}],"成果数":0,"引用数":0,"关注人数":0},papers:[{id:1,title:"我是一篇假论文",authorNames:"假的，假的，假的",n_citation:10086,year:2e3,venue:"编的"},{id:2,title:"我也是一篇假论文",authorNames:"假的，假的，假的",n_citation:10086,year:2e3,venue:"编的"}],netNodes:[{name:"test1"},{name:"test2"}],netLinks:[{source:"test1",target:"test2"}]}},meta:function(){return{title:this.info.姓名+"的门户"}},mounted:function(){this.init(),this.drawLine()},methods:{init:function(){var t=this;this.expId=this.$route.params.expId,console.log(this.$route.params,"------",this.expId),Object(r["l"])(this.expId).then((function(a){console.log(a.data),200===a.status&&(console.log(a.data.data.tags),t.info.姓名=a.data.data.name,t.info.职称=a.data.data.position,t.info.机构=a.data.data.org,t.info.成果数=a.data.data.n_pubs,t.info.引用数=a.data.data.n_citation,t.info.领域=a.data.data.tags,t.papers=a.data.data.paperList,console.log(t.papers))})),Object(r["s"])(this.expId).then((function(a){200===a.status&&("认领关系"===a.data.data?t.owner=!0:"关注关系"===a.data.data?t.followed=!0:"没关系"===a.data.data&&(t.owner=!1,t.followed=!1))})),Object(r["o"])(this.expId).then((function(a){200===a.status?t.info.关注人数=a.data.data:console.log("获取关注人数失败！")})),Object(r["q"])(this.expId).then((function(a){if(200===a.status){var e=0;for(t.netNodes=[],t.netLinks=[],e=0;e<a.data.data.nodes.length;e++)t.netNodes.push({name:a.data.data.nodes[e].scholar.name});for(e=0;e<a.data.data.lines.length;e++)t.netLinks.push({source:a.data.data.lines[e].source.name,target:a.data.data.lines[e].target.name})}else console.log("获取关注人数失败！")}))},toOrg:function(){this.$router.push({name:"orgMain",params:{orgId:1}})},toPaper:function(t){this.$router.push({name:"Academic",params:{acaId:t}})},follow:function(){var t=this;Object(r["h"])(this.expId).then((function(a){200===a.status&&(t.$q.notify("关注成功"),t.followed=!0)}))},unFollow:function(){var t=this;this.followed=!1,Object(r["x"])(this.expId).then((function(a){200===a.status&&(t.$q.notify("取消关注成功"),t.followed=!0)}))},apply:function(){var t=this;Object(r["c"])(this.expId).then((function(a){200===a.status&&(t.$q.notify("认领成功"),t.owner=!0)}))},closeDialog:function(t){this.edit=t},drawLine:function(){var t,a=this.$echarts.init(document.getElementById("myChart"),"dark");a.setOption((t={backgroundColor:"#242a53",title:{text:"关系图谱"},tooltip:{formatter:function(t){return t.data.name}},toolbox:{show:!0,feature:{magicType:["line","bar"],restore:!0,saveAsImage:!0}},legend:[{x:"left",data:["调研机构","接待公司"]}],lineStyle:{normal:{show:!0,color:"target",curveness:.3}},label:{normal:{show:!0,position:"right",formatter:function(t){return t.data.label}}},force:{repulsion:100,gravity:.03,edgeLength:80,layoutAnimation:!0},edgeLabel:{normal:{show:!0,formatter:function(t){return t.data.name}}}},n()(t,"edgeLabel",{normal:{textStyle:{fontSize:20}}}),n()(t,"series",[{type:"graph",layout:"force",symbolSize:80,roam:!0,edgeSymbol:["circle"],edgeSymbolSize:[4,10],edgeLabel:{normal:{textStyle:{fontSize:20}}},force:{repulsion:2500,edgeLength:[10,50]},draggable:!1,itemStyle:{normal:{color:"#fbce86"}},lineStyle:{normal:{width:2,color:"#d4b9cc"}},label:{normal:{show:!0,color:"#242a53",textStyle:{}}},data:this.netNodes,links:this.netLinks}]),t))}}},c=l,d=(e("3e20"),e("c701")),u=e("9989"),p=e("f09f"),f=e("a370"),m=e("9c40"),h=e("eb85"),b=e("1c1c"),v=e("66e5"),g=e("4074"),w=e("0170"),y=e("4983"),q=e("714f"),x=e("3117"),C=e.n(x),_=Object(d["a"])(c,i,s,!1,null,"cb113e3a",null);a["default"]=_.exports;C()(_,"components",{QPage:u["a"],QCard:p["a"],QCardSection:f["a"],QBtn:m["a"],QSeparator:h["a"],QList:b["a"],QItem:v["a"],QItemSection:g["a"],QItemLabel:w["a"],QScrollArea:y["a"]}),C()(_,"directives",{Ripple:q["a"]})},"3e20":function(t,a,e){"use strict";e("a338")},a338:function(t,a,e){}}]);