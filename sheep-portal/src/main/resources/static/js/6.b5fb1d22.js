(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"19f7":function(e,t,a){"use strict";var i=a("3c3f"),l=a.n(i);l.a},"3c3f":function(e,t,a){},c2c6:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{staticClass:"bg-grey-1",attrs:{view:"hHh lpR fFf"}},[a("q-drawer",{attrs:{"show-if-above":"",bordered:"","content-class":"bg-white",width:270},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[a("q-scroll-area",{staticClass:"fit"},[a("q-list",{attrs:{bordered:""}},[e._l(e.fields,(function(t){return a("div",{key:t.label},[a("q-expansion-item",{attrs:{label:t.label,"default-opened":"","header-class":"text-primary"}},[a("q-card",[a("q-card-section",[[a("div",["year"!==t.value?a("q-option-group",{attrs:{options:t.options,type:"checkbox"},model:{value:e.filter[t.value],callback:function(a){e.$set(e.filter,t.value,a)},expression:"filter[item.value]"}}):a("div",[a("q-option-group",{attrs:{options:t.options,type:"radio"},model:{value:e.filter[t.value],callback:function(a){e.$set(e.filter,t.value,a)},expression:"filter[item.value]"}}),a("q-input",{attrs:{filled:"",mask:"####_####","fill-mask":"#",borderless:"",dense:""},model:{value:e.filter[t.value],callback:function(a){e.$set(e.filter,t.value,a)},expression:"filter[item.value]"}})],1)],1)]],2)],1)],1),a("q-separator")],1)})),a("q-item",{attrs:{clickable:""}},[a("q-item-section",{staticStyle:{width:"100%"},on:{click:e.filterFromResult}},[e._v("在结果中筛选")])],1)],2)],1)],1),a("q-page-container",[a("q-page",{staticClass:"q-pa-sm fit row justify-evenly"},[a("div",{staticStyle:{width:"75%"}},[a("div",{staticClass:"row justify-center"},[a("q-card",{staticStyle:{width:"100%"},attrs:{bordered:""}},[a("q-card-section",{staticClass:"bg-grey-1 column"},[a("div",{staticClass:"items-center col"},[a("q-field",{staticClass:"text-h4",attrs:{borderless:""}},[e._v("检索式:"+e._s(e.formula))])],1),a("div",{staticClass:"row items-center justify-between"},[a("span",{staticClass:"text-black"},[e._v("搜索结果："+e._s(e.searchResultNumber)+"条")]),a("span",{staticClass:"text-black"},[a("q-btn-dropdown",{attrs:{label:"排序方式",dense:"",unelevated:""}},[a("q-list",e._l(e.sortMethods,(function(t){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:t.id,attrs:{clickable:""},on:{click:function(a){return e.Sort(t)}}},[a("q-item-section",[a("q-item-label",[e._v(e._s(t.label))])],1)],1)})),1)],1)],1)])]),a("q-card-section",{},e._l(e.searchResultList,(function(e){return a("div",{key:e.id,staticStyle:{width:"100%"}},[a("search-result",{attrs:{doc:e}})],1)})),0)],1),a("q-pagination",{staticStyle:{height:"50px"},attrs:{max:e.searchResultNumber/10,"max-pages":6,"boundary-numbers":!0,"boundary-links":!0},on:{input:e.searchPaper},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}})],1)]),a("div",{staticStyle:{width:"22%"}},[a("q-list",{attrs:{bordered:""}},e._l(e.expertList,(function(t){return a("div",{key:t.id},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(a){return e.toExpert(t.id)}}},[a("q-item-section",[a("span",{staticClass:"text-h6"},[e._v(e._s(t.name))]),a("q-item-label",{staticClass:"q-gutter-xs",attrs:{caption:""}},e._l(t.tags,(function(e){return a("q-badge",{key:e.t,attrs:{outline:"",color:"primary",label:e.t}})})),1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("所在机构："+e._s(t.org))]),a("q-item-label",[e._v("出版数："+e._s(t.n_pubs))]),a("q-item-label",[e._v("被引量: "+e._s(t.n_citation))])],1)],1),a("q-separator")],1)})),0)],1)])],1)],1)},l=[],s=(a("4de4"),a("4160"),a("a15b"),a("4e82"),a("b0c0"),a("159b"),a("d272"),a("4ec3")),r=(a("fb6a"),a("ac1f"),a("5319"),function(e){var t="";if(e.any&&e.any.length>0){var a="(关键词=("+e.any.replace(" ","||")+"))";t+=a+"&&"}if(e.all&&e.all.length>0){var i="(关键词=("+e.all.replace(" ","&&")+"))";t+=i+"&&"}if(e.exclude&&e.exclude.length>0){var l="(关键词=!("+e.exclude.replace(" ","&&")+"))";t+=l+"&&"}if(e.author&&e.author.length>0){var s="(作者=("+e.author.replace(" ","||")+"))";t+=s+"&&"}if(e.fos&&e.fos.length>0){var r="(领域=("+e.fos.replace(",","||")+"))";t+=r+"&&"}if(e.venue&&e.venue.length>0){var o="(期刊=("+e.venue.replace(" ","||")+"))";t+=o+"&&"}return console.log("ret",t),0===t.length?t:t.slice(0,t.length-2)}),o={sort:"",any:"",all:"",exclude:"",author:"",fos:"",venue:"",pos:0,pageNum:1,yearRange:"_2020"},n={name:"SearchLayout",data:function(){return{formula:"",range:{min:0,max:100},fields:[{label:"领域",value:"fos",options:[{label:"信息",value:"op1"},{label:"医学",value:"op2"},{label:"理学",value:"op3"},{label:"经济",value:"op4"},{label:"法学",value:"op4"},{label:"文学",value:"op5"},{label:"艺术",value:"op6"},{label:"历史",value:"op7"}]},{label:"年份",value:"year",options:[{label:"2020",value:"2019_2020"},{label:"2019",value:"2018_2019"},{label:"2015-2018",value:"2015_2018"},{label:"2010-2014",value:"2010_2014"},{label:"2005-2009",value:"2005_2009"},{label:"2000-2004",value:"2000_2004"}]}],leftDrawerOpen:!0,showAdvanced:!1,showDateOptions:!1,exactPhrase:"",hasWords:"",excludeWords:"",byWebsite:"",byDate:"Any time",group:"op1",filter:{fos:[],year:"",author:[]},keyword:{sort:"",any:"",all:"",exclude:"",author:"",fos:"",venue:"",pos:0,pageNum:1,yearRange:"_2020"},current:1,searchResultNumber:100,searchResultList:[{id:1,title:"计算机视觉",authors:[{name:"张三",id:1},{name:"王四",id:2}],venue:"IEEE",year:"2019",n_citation:"2020",abstract:"这是摘要"}],sortMethods:[{label:"时间升序",id:"year-asc"},{label:"时间降序",id:"year-desc"},{label:"被引量升序",id:"n_citation-asc"},{label:"被引量降序",id:"n_citation-desc"}],expertList:[{id:1,name:"张三",org:"清华",n_pubs:123,n_citation:321,tags:[{t:"计算机"},{t:"视觉"}]},{id:2,name:"张三",org:"清华",n_pubs:123,n_citation:321,tags:[{t:"计算机"},{t:"视觉"}]}],timer:null}},mounted:function(){this.keyword=JSON.parse(this.$route.query.keywords)},watch:{$route:{handler:function(e){console.log(e),"SearchResult"===e.name&&(this.keyword=JSON.parse(e.query.keywords),this.init())},immediate:!0,deep:!0}},methods:{init:function(){var e=this;this.$q.loading.show(),console.log(this.$q.loading),this.timer=setTimeout((function(){e.$q.loading.hide(),e.timer=void 0}),8e3),console.log(this.$route),this.formula=r(this.keyword),this.searchPaper()},searchExpert:function(){var e=this;Object(s["m"])(this.keyword.author).then((function(t){200===t.status&&(e.expertList=[],e.expertList=t.data.data.results,e.keyword=o)}))},searchPaper:function(){var e=this;this.keyword.author&&this.keyword.author.length>0&&this.searchExpert(),this.keyword.pageNum=this.current,Object(s["u"])(this.keyword).then((function(t){200===t.status&&(console.log(t),e.expertList=[],e.searchResultList=t.data.data.results,e.searchResultNumber=t.data.data.total,e.current=t.data.data.pageNum,e.totalPages=t.data.data.totalPages,e.fields[0].options=[],t.data.data.fields.forEach((function(t){e.fields[0].options.push({label:t.field+"("+t.num+")",value:t.field})})),e.filter.fos=[],e.filter.year="",e.keyword=o)}))},Sort:function(e){this.keyword.sort=e.id,this.init()},filterFromResult:function(){this.keyword.fos=this.filter["fos"].join(","),this.keyword.yearRange=this.filter["year"],console.log(this.filter),this.init()},toAcademic:function(e){this.$router.push({name:"Academic",params:{acaId:e}})},toExpert:function(e){this.$router.push({name:"expMain",expId:e})}},beforeDestroy:function(){void 0!==this.timer&&(clearTimeout(this.timer),this.$q.loading.hide())}},c=n,u=(a("19f7"),a("2877")),d=a("4d5a"),p=a("9404"),f=a("4983"),h=a("1c1c"),b=a("3b73"),m=a("f09f"),v=a("a370"),y=a("9f0a"),g=a("27f9"),w=a("eb85"),q=a("66e5"),k=a("4074"),_=a("09e3"),x=a("9989"),Q=a("8572"),C=a("f20b"),S=a("0170"),R=a("3b16"),$=a("58a8"),L=a("0016"),N=a("7f67"),O=a("714f"),E=a("eebe"),P=a.n(E),D=Object(u["a"])(c,i,l,!1,null,null,null);t["default"]=D.exports;P()(D,"components",{QLayout:d["a"],QDrawer:p["a"],QScrollArea:f["a"],QList:h["a"],QExpansionItem:b["a"],QCard:m["a"],QCardSection:v["a"],QOptionGroup:y["a"],QInput:g["a"],QSeparator:w["a"],QItem:q["a"],QItemSection:k["a"],QPageContainer:_["a"],QPage:x["a"],QField:Q["a"],QBtnDropdown:C["a"],QItemLabel:S["a"],QPagination:R["a"],QBadge:$["a"],QIcon:L["a"]}),P()(D,"directives",{ClosePopup:N["a"],Ripple:O["a"]})}}]);