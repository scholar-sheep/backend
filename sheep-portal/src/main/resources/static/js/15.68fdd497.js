(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"3c7a":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("q-page",{staticClass:"fit column content-center wrap",attrs:{padding:""}},[n("q-table",{staticStyle:{width:"90%"},attrs:{grid:e.$q.screen.xs,title:"收藏",data:e.data,columns:e.columns,"row-key":"name",filter:e.filter,separator:"cell",selection:e.selection,selected:e.selected,pagination:e.initialPagination,"visible-columns":e.visibleColumns,flat:""},on:{"update:selected":function(t){e.selected=t}},scopedSlots:e._u([{key:"top",fn:function(){return[e.me?n("q-btn",{staticClass:"q-ml-sm",attrs:{color:"dark",label:"批量取消收藏",unelevated:""},on:{click:e.doRemove}}):e._e(),n("q-space"),n("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"搜索收藏夹"},scopedSlots:e._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-题名",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("span",{staticStyle:{cursor:"pointer"},on:{click:function(n){return e.toAcademic(t.row.paperId)}}},[e._v(e._s(t.row.title))])])]}},{key:"body-cell-作者",fn:function(t){return[n("q-td",{attrs:{props:t}},e._l(t.row,(function(t){return n("span",{key:t.id,staticStyle:{cursor:"pointer"},on:{click:function(n){return e.toExpert(t.id)}}},[e._v(e._s(t.name)+", ")])})),0)]}},{key:"body-cell-收藏",fn:function(t){return[n("q-td",{attrs:{props:t}},[n("q-icon",{staticStyle:{cursor:"pointer"},attrs:{name:t.row.favored?"star":"star_outline",size:"large"},on:{click:function(n){return e.changeCollect(t.row)}}})],1)]}}])})],1)},a=[],c=(n("4160"),n("159b"),n("4ec3")),i={name:"Collection",data:function(){return{uId:0,filter:"",selected:[],initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10},icon:"star",columns:[{name:"题名",required:!0,label:"题名",align:"center",field:"title",sortable:!0},{name:"作者",label:"作者",field:function(e){return e.authors},sortable:!0,align:"center"},{name:"被引量",label:"被引量",field:"nCitation",align:"center",sortable:!0},{name:"出处",label:"出处",field:"venue",align:"center"},{name:"时间",label:"时间",field:"year",align:"center",sortable:!0},{name:"收藏",label:"收藏",field:"favored",align:"center"}],data:[]}},computed:{visibleColumns:function(){return this.me?["作者","被引量","出处","时间","收藏"]:["作者","被引量","出处","时间"]},me:function(){return this.$route.params.uId+""===localStorage.getItem("userId")},selection:function(){return this.me?"multiple":"none"}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.uId=this.$route.params.uId,Object(c["k"])(this.uId).then((function(t){200===t.status&&(console.log(t),e.data=res.data.data)}))},doAdd:function(){var e=this;this.selected.forEach((function(t){e.doCollect(t.paperId,(function(e){e&&(t.favored=!0)}))})),this.selected=[]},doRemove:function(){var e=this;this.selected.forEach((function(t){e.doCollect(t.paperId,(function(e){e&&(t.favored=!1)}))})),this.selected=[]},changeCollect:function(e){e.favored?this.undoCollect(e.paperId,(function(t){t&&(e.favored=!1)})):this.doCollect(e.paperId,(function(t){t&&(e.favored=!0)}))},doCollect:function(e,t){Object(c["f"])(e).then((function(e){200===e.status&&t(!0)})).catch((function(e){console.log(e)})),t(!1)},undoCollect:function(e,t){Object(c["f"])(e).then((function(e){200===e.status&&t(!0)})).catch((function(e){console.log(e)})),t(!1)},toAcademic:function(e){this.$router.push({name:"Academic",params:{expId:e}})},toExpert:function(e){this.$router.push({name:"expMain",params:{expId:e}})}}},r=i,l=n("2877"),s=n("9989"),u=n("eaac"),d=n("9c40"),f=n("2c91"),p=n("27f9"),m=n("0016"),h=n("db86"),b=n("eebe"),g=n.n(b),v=Object(l["a"])(r,o,a,!1,null,null,null);t["default"]=v.exports;g()(v,"components",{QPage:s["a"],QTable:u["a"],QBtn:d["a"],QSpace:f["a"],QInput:p["a"],QIcon:m["a"],QTd:h["a"]})}}]);