(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"30d6":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("q-page",{staticClass:"fit column content-center wrap",attrs:{padding:""}},[n("q-table",{staticStyle:{width:"90%"},attrs:{grid:t.$q.screen.xs,title:"收藏",data:t.data,columns:t.columns,"row-key":"name",filter:t.filter,separator:"cell",selection:t.selection,selected:t.selected,pagination:t.initialPagination,"visible-columns":t.visibleColumns,flat:""},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top",fn:function(){return[t.me?n("q-btn",{staticClass:"q-ml-sm",attrs:{color:"negative",label:"批量取消关注",unelevated:""},on:{click:t.doRemove}}):t._e(),n("q-space"),n("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"搜索关注列表"},scopedSlots:t._u([{key:"append",fn:function(){return[n("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}})]},proxy:!0},{key:"body-cell-名字",fn:function(e){return[n("q-td",{attrs:{props:e}},[n("span",{staticStyle:{cursor:"pointer"},on:{click:function(n){return t.toExpert(e.row.id)}}},[t._v(t._s(e.row.name))])])]}},{key:"body-cell-关注",fn:function(e){return[n("q-td",{attrs:{props:e}},[n("q-icon",{staticStyle:{cursor:"pointer"},attrs:{name:"1"===e.row.isFollow?"o_visibility_off":"o_visibility",size:"large"},on:{click:function(n){return t.changeFollow(e.row)}}})],1)]}}])})],1)},i=[],l=(n("4160"),n("b0c0"),n("159b"),n("4ec3")),a={name:"Collection",data:function(){return{filter:"",selected:[],initialPagination:{sortBy:"desc",descending:!1,page:1,rowsPerPage:10,rowsNumber:0},columns:[{name:"名字",required:!0,label:"学者",align:"center",field:function(t){return t.name},sortable:!0},{name:"所属机构",label:"所属机构",field:"org",align:"center"},{name:"成果数",label:"成果数",field:"n_pubs",align:"center",sortable:!0},{name:"被引量",label:"被引量",field:"n_citation",align:"center",sortable:!0},{name:"关注",label:"关注",field:"isFollow",align:"center"}],data:[]}},computed:{visibleColumns:function(){return this.me?["名字","所属机构","成果数","被引量","关注"]:["名字","所属机构","成果数","被引量"]},me:function(){return this.$route.params.uId+""==="1"},selection:function(){return this.me?"multiple":"none"}},mounted:function(){this.init()},methods:{init:function(){var t=this;Object(l["l"])(this.$route.params.uId).then((function(e){200===e.status&&(t.data=e.data.data,t.initialPagination.rowsNumber=t.data.length)})).catch((function(t){console.log(t)}))},doAdd:function(){var t=this;this.$q.notify("已关注"),this.selected.forEach((function(e){t.doFollow(e.id)&&(e.isFollow="1")})),this.selected=[]},doRemove:function(){var t=this;this.$q.notify("已取消关注"),this.selected.forEach((function(e){t.undoFollow(e.id)&&(t.$q.notify("取消关注"+e.name),e.isFollow="0")})),this.selected=[]},changeFollow:function(t){"1"===t.isFollow?this.undoFollow(t.id)&&(this.$q.notify("取消关注"+t.name),t.isFollow="0"):this.doFollow(t.id)&&(t.isFollow="1")},toExpert:function(t){this.$router.push({name:"expMain",params:{expId:t}})},doFollow:function(t){return Object(l["g"])(t).then((function(t){if(200===t.status)return!0})).catch((function(t){console.log(t)})),!1},undoFollow:function(t){return Object(l["t"])(t).then((function(t){if(200===t.status)return!0})).catch((function(t){console.log(t)})),!1}}},s=a,c=n("2877"),r=n("9989"),u=n("eaac"),d=n("9c40"),f=n("2c91"),p=n("27f9"),m=n("0016"),h=n("db86"),b=n("eebe"),w=n.n(b),g=Object(c["a"])(s,o,i,!1,null,null,null);e["default"]=g.exports;w()(g,"components",{QPage:r["a"],QTable:u["a"],QBtn:d["a"],QSpace:f["a"],QInput:p["a"],QIcon:m["a"],QTd:h["a"]})}}]);