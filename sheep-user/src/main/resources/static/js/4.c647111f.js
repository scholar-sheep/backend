(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"58b5":function(t,e,a){"use strict";a("8219")},8219:function(t,e,a){},"9dad":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"fit column content-center wrap q-pa-lg"},[a("div",{staticClass:" row no-wrap items-center justify-around",style:t.bgImg},[t.me?a("div",{staticClass:"cursor-pointer",on:{click:function(e){t.edit["头像"]=!1}}},[a("q-dialog",{model:{value:!t.edit["头像"],callback:function(e){t.$set(!t.edit,"头像",e)},expression:"!edit['头像']"}},[a("q-card",{staticStyle:{"min-width":"350px"}},[a("q-card-section",{staticClass:"row items-center q-pb-none"},[a("div",{staticClass:"text-h6"},[t._v("修改头像")]),a("q-space"),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{icon:"close",flat:"",round:"",dense:""}})],1),a("q-card-section",{staticClass:"fit row justify-center"},[a("el-upload",{ref:"upload",attrs:{action:"1",accept:"image/png,image/gif,image/jpg,image/jpeg","http-request":t.uploadAvatar,limit:1,"auto-upload":!1,"show-file-list":!1,"before-upload":t.handleBeforeUpload,"on-change":t.imgChange,"on-success":t.handleAvatarSuccess}},[a("my-head",{attrs:{head:t.data["头像"],icon:"face",size:"150px"}})],1)],1),a("q-card-actions",{staticClass:"text-positive",attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:"text-info text-h6",attrs:{flat:"",label:"取消",dense:""}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],staticClass:" text-h6",attrs:{flat:"",label:"修改",dense:""},on:{click:t.uploadFile}})],1)],1)],1),a("my-head",{attrs:{head:t.data["头像"],icon:"face",size:"150px"}})],1):a("div",[a("my-head",{attrs:{head:t.data["头像"],icon:"face",size:"150px"}})],1),a("q-card",{staticClass:"col-6"},[a("q-card-section",[a("q-input",{staticClass:"text-h3",attrs:{borderless:"",readonly:!t.me},on:{input:function(e){t.edit["用户名"]=!0},blur:function(e){t.edit["用户名"]=!1}},scopedSlots:t._u([{key:"append",fn:function(){return[t.me&&t.edit["用户名"]?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"done"},on:{click:function(e){return t.submit(t.data["用户名"],"用户名")}}}):t._e()]},proxy:!0}]),model:{value:t.data["用户名"],callback:function(e){t.$set(t.data,"用户名",e)},expression:"data['用户名']"}})],1),a("q-card-section",[a("q-input",{staticStyle:{"max-width":"100%"},attrs:{borderless:"",readonly:!t.me,dense:"",autogrow:"",maxlength:"100"},on:{input:function(e){t.edit["个人简介"]=!0},blur:function(e){t.edit["个人简介"]=!1}},scopedSlots:t._u([{key:"append",fn:function(){return[t.me&&t.edit["个人简介"]?a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"done"},on:{click:function(e){return t.submit(t.data["个人简介"],"个人简介")}}}):t._e()]},proxy:!0}]),model:{value:t.data["个人简介"],callback:function(e){t.$set(t.data,"个人简介",e)},expression:"data['个人简介']"}})],1)],1)],1),a("q-space"),a("div",{staticClass:"row justify-around"},[a("div",{staticClass:"column col-md-4 q-gutter-y-lg"},[a("q-input",{staticClass:"text-h6",attrs:{readonly:t.edit["性别"],borderless:"",dense:""},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticClass:"text-h6 text-grey-7",staticStyle:{width:"150px"}},[t._v("性别")])]},proxy:!0},{key:"after",fn:function(){return[t.me?a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"o_edit"},on:{click:function(e){return t.closeDialog(!1,"性别")}}}):t._e()]},proxy:!0}]),model:{value:t.data["性别"],callback:function(e){t.$set(t.data,"性别",e)},expression:"data['性别']"}},[a("user-dialog",{attrs:{data:t.data["性别"],field:"性别",show:!t.edit["性别"]&&t.me},on:{submit:t.submit,close:t.closeDialog}})],1),a("q-input",{staticClass:"text-h6",attrs:{readonly:t.edit["生日"],borderless:"",dense:""},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticClass:"text-h6 text-grey-7",staticStyle:{width:"150px"}},[t._v("生日")])]},proxy:!0},{key:"after",fn:function(){return[t.me?a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"o_edit"},on:{click:function(e){t.edit["生日"]=!0}}},[a("q-popup-proxy",{ref:"qDateProxy",attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-date",{attrs:{flat:"",color:""},model:{value:t.data["生日"],callback:function(e){t.$set(t.data,"生日",e)},expression:"data['生日']"}},[a("div",{staticClass:"row items-center justify-end"},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"取消",color:"primary",flat:""}}),a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{label:"确定",color:"positive",flat:""},on:{click:function(e){return t.submit(t.data.生日,"生日")}}})],1)])],1)],1):t._e()]},proxy:!0}]),model:{value:t.data["生日"],callback:function(e){t.$set(t.data,"生日",e)},expression:"data['生日']"}}),a("q-input",{attrs:{readonly:!t.edit["密码"],type:"password",borderless:"",dense:""},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticClass:"text-h6 text-grey-7",staticStyle:{width:"150px"}},[t._v("密码")])]},proxy:!0},{key:"after",fn:function(){return[t.me?a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"o_edit"},on:{click:function(e){t.edit["密码"]=!1}}}):t._e()]},proxy:!0}]),model:{value:t.data["密码"],callback:function(e){t.$set(t.data,"密码",e)},expression:"data['密码']"}},[a("user-dialog",{attrs:{data:t.data["密码"],field:"密码",show:!t.edit["密码"]&&t.me},on:{submit:t.submit,close:t.closeDialog}})],1),a("q-input",{staticClass:"text-h6",attrs:{readonly:t.edit["邮箱"],borderless:"",dense:""},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticClass:"text-h6 text-grey-7",staticStyle:{width:"150px"}},[t._v("绑定邮箱")])]},proxy:!0},{key:"after",fn:function(){return[t.me?a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"o_edit"},on:{click:function(e){t.edit["邮箱"]=!1}}}):t._e()]},proxy:!0}]),model:{value:t.data["邮箱"],callback:function(e){t.$set(t.data,"邮箱",e)},expression:"data['邮箱']"}},[a("user-dialog",{attrs:{data:t.data["邮箱"],field:"邮箱",show:!t.edit["邮箱"]&&t.me},on:{submit:t.submit,close:t.closeDialog}})],1)],1),a("div",{staticClass:"column col-md-4 q-gutter-y-lg"},[a("q-input",{staticClass:"text-h6",attrs:{readonly:t.edit["手机"],borderless:"",dense:""},scopedSlots:t._u([{key:"before",fn:function(){return[a("span",{staticClass:"text-h6 text-grey-7",staticStyle:{width:"150px"}},[t._v("绑定手机")])]},proxy:!0},{key:"after",fn:function(){return[t.me?a("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"o_edit"},on:{click:function(e){t.edit["手机"]=!1}}}):t._e()]},proxy:!0}]),model:{value:t.data["手机"],callback:function(e){t.$set(t.data,"手机",e)},expression:"data['手机']"}},[a("user-dialog",{attrs:{data:t.data["手机"],field:"手机",show:!t.edit["手机"]&&t.me},on:{submit:t.submit,close:t.closeDialog}})],1)],1)]),a("q-space")],1)},i=[],o=a("c92d"),n=a.n(o),c=(a("fe09"),a("4ec3")),r=a("758b"),d={name:"UserInfo",data:function(){return{bgImg:{backgroundImage:"url("+a("c445")+")",backgroundRepeat:"no-repeat",backgroundPosition:"center",width:"100%",height:"280px",borderRadius:"30px"},edit:{"用户名":!0,"个人简介":!0,"密码":!0,"生日":!0,"性别":!0,"邮箱":!0,"手机":!0,"头像":!0},data:{"头像":"https://cdn.quasar.dev/img/avatar.png","用户名":"菜鸟","个人简介":"个人简介个人简介个人简介个人简介个人简介个人简介个人简介个人简介个人简介个人简介个人简介个人简介个人简介","密码":"1234","生日":"2000/09/30","性别":"女","邮箱":"123@123.com","手机":"18810001100"},uId:2,usertype:1,uploadUrl:r["b"]+"/1",headFile:"",dialogImageUrl:"",dialogVisible:!1,user:{username:"",email:"",mobile:"",usertype:0}}},computed:{me:function(){return this.$route.params.uId+""==="1"}},mounted:function(){this.init()},methods:{init:function(){var t=this;this.uId=this.$route.params.uId,console.log("paramid"+n()(this.uId)),Object(c["g"])(this.uId).then((function(e){200===e.status&&(t.data.用户名=e.data.data.username,t.data.头像=e.data.data.avatar,t.data.手机=e.data.data.mobile,t.data.个人简介=e.data.data.note,t.data.邮箱=e.data.data.email,t.usertype=e.data.data.usertype)}))},submit:function(t,e){var a=this;this.data[e]=t,console.log(this.data),this.user.username="testuser",this.user.usertype=this.usertype,this.user.mobile="testuser",this.user.email="testuser",Object(c["h"])(this.uId,this.user).then((function(t){200===t.status?(a.$q.notify({color:"positive",message:"修改"+e+"成功"}),a.init(),a.edit[e]=!0):(a.$q.notify("修改"+e+"失败"),a.edit[e]=!0)})).catch((function(t){console.log(t),a.edit[e]=!0,a.$q.notify("修改"+e+"失败")}))},closeDialog:function(t,e){this.edit[e]=t},handleBeforeUpload:function(t){"image/png"!==t.type&&"image/gif"!==t.type&&"image/jpg"!==t.type&&"image/jpeg"!==t.type&&this.$q.notify({message:"请上传格式为image/png, image/gif, image/jpg, image/jpeg的图片"});var e=t.size/1024/1024/2;e>2&&this.$q.notify({message:"图片大小必须小于2M"}),("image/png"===t.type||"image/gif"===t.type||"image/jpg"===t.type||"image/jpeg"===t.type)&&e<=2&&(this.data["头像"]=t)},uploadAvatar:function(){var t=this,e=new FormData;e.append("avatar",this.data.头像),e.append("ID",this.uId),this.$axios.post("/avatar",e,{headers:{"content-type":"form-data"}}).then((function(e){console.log(e),200===e.status?(console.log(e),t.data.头像=e.data.data,localStorage.head=t.this.data.头像,Object(c["g"])(t.uId)):t.$q.notify("修改头像失败")})).catch((function(t){console.log(t.response)}))},uploadFile:function(){this.$refs.upload.submit()},imgChange:function(t,e){this.hideUpload=e.length>=this.limitNum,e&&this.$refs.uploadElement.clearValidate()},handleAvatarSuccess:function(t){window.console.log(t)}}},l=d,u=(a("58b5"),a("c701")),p=a("9989"),f=a("24e8"),m=a("f09f"),g=a("a370"),h=a("2c91"),y=a("9c40"),b=a("4b7e"),x=a("27f9"),v=a("0016"),q=a("7cbe"),w=a("52ee"),k=a("7f67"),C=a("3117"),_=a.n(C),$=Object(u["a"])(l,s,i,!1,null,null,null);e["default"]=$.exports;_()($,"components",{QPage:p["a"],QDialog:f["a"],QCard:m["a"],QCardSection:g["a"],QSpace:h["a"],QBtn:y["a"],QCardActions:b["a"],QInput:x["a"],QIcon:v["a"],QPopupProxy:q["a"],QDate:w["a"]}),_()($,"directives",{ClosePopup:k["a"]})},c445:function(t,e,a){t.exports=a.p+"img/12345.d61c491c.jpg"}}]);