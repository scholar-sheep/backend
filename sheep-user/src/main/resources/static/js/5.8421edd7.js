(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"18f2":function(e,t,a){},"19f7":function(e,t,a){"use strict";a("18f2")},c2c6:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{staticClass:"bg-grey-1",attrs:{view:"hHh lpR fFf"}},[a("q-drawer",{attrs:{"show-if-above":"",bordered:"","content-class":"bg-white",width:270},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[a("q-scroll-area",{staticClass:"fit"},[a("q-list",{attrs:{bordered:""}},[e._l(e.fields,(function(t){return a("div",{key:t.label},[a("q-expansion-item",{attrs:{label:t.label,"default-opened":"","header-class":"text-primary"}},[a("q-card",[a("q-card-section",[[a("div",["year"!==t.value?a("q-option-group",{attrs:{options:t.options,type:"checkbox"},model:{value:e.filter[t.value],callback:function(a){e.$set(e.filter,t.value,a)},expression:"filter[item.value]"}}):a("q-option-group",{attrs:{options:t.options,type:"radio"},model:{value:e.filter[t.value],callback:function(a){e.$set(e.filter,t.value,a)},expression:"filter[item.value]"}})],1)]],2)],1)],1),a("q-separator")],1)})),a("q-item",{attrs:{clickable:""}},[a("q-item-section",{staticStyle:{width:"100%"},on:{click:e.filterFromResult}},[e._v("在结果中筛选")])],1)],2)],1)],1),a("q-page-container",[a("q-page",{staticClass:"q-pa-sm fit row justify-evenly"},[a("div",{staticStyle:{width:"75%"}},[a("div",{staticClass:"row justify-center"},[a("q-card",{staticStyle:{width:"100%"},attrs:{bordered:""}},[a("q-card-section",{staticClass:"bg-grey-1 column"},[a("div",{staticClass:"items-center col"},[a("q-field",{staticClass:"text-h4",attrs:{borderless:""}},[e._v("检索式："+e._s(e.formula))])],1),a("div",{staticClass:"row items-center justify-between"},[a("span",{staticClass:"text-black"},[e._v("搜索结果："+e._s(e.searchResultNumber)+"条")]),a("span",{staticClass:"text-black"},[a("q-btn-dropdown",{attrs:{label:"排序方式",dense:"",unelevated:""}},[a("q-list",e._l(e.sortMethods,(function(t){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:t.id,attrs:{clickable:""},on:{click:function(a){return e.Sort(t)}}},[a("q-item-section",[a("q-item-label",[e._v(e._s(t.label))])],1)],1)})),1)],1)],1)])]),a("q-card-section",{staticStyle:{}},e._l(e.searchResultList,(function(e){return a("div",{key:e.id,staticStyle:{width:"100%"}},[a("search-result",{attrs:{doc:e}})],1)})),0)],1),a("q-pagination",{staticStyle:{height:"50px"},attrs:{max:10,"max-pages":6,"boundary-numbers":!0,"boundary-links":!0},on:{input:function(t){return e.searchPaper()}},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}})],1)]),a("div",{staticStyle:{width:"22%"}},[a("q-list",{attrs:{bordered:""}},e._l(e.expertList,(function(t){return a("div",{key:t.id},[a("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{clickable:""},on:{click:function(a){return e.toExpert(t.id)}}},[a("q-item-section",[a("span",{staticClass:"text-h6"},[e._v(e._s(t.name))]),a("q-item-label",{staticClass:"q-gutter-xs",attrs:{caption:""}},e._l(t.tags,(function(e){return a("q-badge",{key:e.t,attrs:{outline:"",color:"primary",label:e.t}})})),1)],1),a("q-item-section",{attrs:{side:""}},[a("q-item-label",[e._v("所在机构："+e._s(t.org))]),a("q-item-label",[e._v("出版数："+e._s(t.n_pubs))]),a("q-itemlabel",[e._v("被引量: "+e._s(t.n_citation))])],1)],1),a("q-separater")],1)})),0)],1)])],1)],1)},i=[],r=(a("4de4"),a("4160"),a("a15b"),a("4e82"),a("b0c0"),a("159b"),a("d272"),a("4ec3")),s=(a("fb6a"),a("ac1f"),a("5319"),function(e){var t="  ";if(e.any&&e.any.length>0){var a="(关键词=("+e.any.replace(" ","||")+"))";t+=a+"&&"}if(e.all&&e.all.length>0){var l="(关键词=("+e.all.replace(" ","&&")+"))";t+=l+"&&"}if(e.exclude&&e.exclude.length>0){var i="(关键词=!("+e.exclude.replace(" ","&&")+"))";t+=i+"&&"}if(e.author&&e.author.length>0){var r="(作者=("+e.exclude.replace(" ","||")+"))";t+=r+"&&"}if(e.fos&&e.fos.length>0){var s="(领域=("+e.exclude.replace(",","||")+"))";t+=s+"&&"}if(e.venue&&e.venue.length>0){var o="(期刊=("+e.exclude.replace(" ","||")+"))";t+=o+"&&"}return console.log(t),t.slice(0,t.length-2)}),o={name:"SearchLayout",data:function(){return{formula:"",range:{min:0,max:100},fields:[{label:"领域",value:"fos",options:[{label:"信息",value:"op1"},{label:"医学",value:"op2"},{label:"理学",value:"op3"},{label:"经济",value:"op4"},{label:"法学",value:"op4"},{label:"文学",value:"op5"},{label:"艺术",value:"op6"},{label:"历史",value:"op7"}]},{label:"年份",value:"year",options:[{label:"2020",value:"2019_2020"},{label:"2019",value:"2018_2019"},{label:"2015-2018",value:"2015_2018"},{label:"2010-2014",value:"2010_2014"},{label:"2005-2009",value:"2005_2009"},{label:"2000-2004",value:"2000_2004"}]},{label:"作者",value:"author",options:[{label:"张三",value:"张三"}]}],leftDrawerOpen:!0,showAdvanced:!1,showDateOptions:!1,exactPhrase:"",hasWords:"",excludeWords:"",byWebsite:"",byDate:"Any time",group:"op1",filter:{fos:[],year:"",author:[]},keyword:{sort:"",any:"",all:"",exclude:"",author:"",fos:"",venue:"",pos:0,pageNum:1,yearRange:"_2020"},current:1,searchResultNumber:100,searchResultList:[{id:1,title:"计算机视觉",authors:[{name:"张三",id:1},{name:"王四",id:2}],venue:"IEEE",year:"2019",n_citation:"2020",abstract:"这是摘要"}],sortMethods:[{label:"时间升序",id:"year-asc"},{label:"时间降序",id:"year-desc"},{label:"被引量升序",id:"n_citation-asc"},{label:"被引量降序",id:"n_citation-desc"}],expertList:[{id:1,name:"张三",org:"清华",n_pubs:123,n_citation:321,tags:[{t:"计算机"},{t:"视觉"},{t:"视觉"},{t:"视觉"},{t:"视觉"}]},{id:2,name:"张三",org:"清华",n_pubs:123,n_citation:321,tags:[{t:"计算机"},{t:"视觉"}]}]}},mounted:function(){this.init()},watch:{$route:{handler:function(e){console.log(e),"SearchResult"===e.name&&(this.keyword=JSON.parse(e.query.keywords),this.searchPaper())},immediate:!0,deep:!0}},methods:{init:function(){console.log(this.$route),this.keyword=JSON.parse(this.$route.query.keywords),this.formula=s(this.keyword),this.searchPaper()},searchPaper:function(){var e=this;this.keyword.pageNum=this.current,Object(r["o"])(this.keyword).then((function(t){200===t.status&&(console.log(t),e.searchResultList=[],t.data.data.results.forEach((function(t){e.searchResultList.push({id:t.id,title:t.title,authors:t.authors,venue:t.venue,year:t.year,n_citation:t.n_citation,abstract:t.abstract})})),e.searchResultNumber=t.data.data.total,e.current=t.data.data.pageNum,e.totalPages=t.data.data.totalPages,e.fields[0].options=[],t.data.data.fields.forEach((function(t){e.fields[0].options.push({label:t.field+"("+t.num+")",value:t.field})})),e.fields[2].options=[],t.data.data.authorNames.forEach((function(t){e.fields[2].options.push({label:t,value:t})})),e.filter.author=[],e.filter.fos=[],e.filter.year="")}))},Sort:function(e){this.keyword.sort=e.id,this.searchPaper()},filterFromResult:function(){console.log(this.filter),this.keyword.fos=this.filter["fos"].join(","),this.keyword.yearRange=this.filter["year"],this.keyword.author=this.filter["author"].join(" "),this.searchPaper()},toAcademic:function(e){this.$router.push({name:"Academic",params:{acaId:e}})},toExpert:function(e){this.$router.push({name:"expMain",expId:e})}}},n=o,c=(a("19f7"),a("c701")),u=a("4d5a"),d=a("9404"),p=a("4983"),f=a("1c1c"),h=a("3b73"),b=a("f09f"),v=a("a370"),m=a("9f0a"),y=a("eb85"),g=a("66e5"),w=a("4074"),_=a("09e3"),q=a("9989"),k=a("8572"),x=a("f20b"),Q=a("0170"),S=a("3b16"),C=a("58a8"),R=a("0016"),P=a("7f67"),N=a("714f"),E=a("3117"),L=a.n(E),O=Object(c["a"])(n,l,i,!1,null,null,null);t["default"]=O.exports;L()(O,"components",{QLayout:u["a"],QDrawer:d["a"],QScrollArea:p["a"],QList:f["a"],QExpansionItem:h["a"],QCard:b["a"],QCardSection:v["a"],QOptionGroup:m["a"],QSeparator:y["a"],QItem:g["a"],QItemSection:w["a"],QPageContainer:_["a"],QPage:q["a"],QField:k["a"],QBtnDropdown:x["a"],QItemLabel:Q["a"],QPagination:S["a"],QBadge:C["a"],QIcon:R["a"]}),L()(O,"directives",{ClosePopup:P["a"],Ripple:N["a"]})}}]);