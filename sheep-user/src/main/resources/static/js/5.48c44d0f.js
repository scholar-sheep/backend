(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"19f7":function(e,t,a){"use strict";var r=a("3c3f"),l=a.n(r);l.a},"3c3f":function(e,t,a){},c2c6:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-layout",{staticClass:"bg-grey-1",attrs:{view:"hHh lpR fFf"}},[a("q-drawer",{attrs:{"show-if-above":"",bordered:"","content-class":"bg-white",width:280},model:{value:e.leftDrawerOpen,callback:function(t){e.leftDrawerOpen=t},expression:"leftDrawerOpen"}},[a("q-scroll-area",{staticClass:"fit"},[a("q-list",{attrs:{bordered:""}},[e._l(e.fields,(function(t){return a("div",{key:t.label},[a("q-expansion-item",{attrs:{label:t.label,"default-opened":"","header-class":"text-primary"}},[a("q-card",[a("q-card-section",[[a("div",["year"!==t.value?a("q-option-group",{attrs:{options:t.options,type:"checkbox"},model:{value:e.filter[t.value],callback:function(a){e.$set(e.filter,t.value,a)},expression:"filter[item.value]"}}):a("q-option-group",{attrs:{options:t.options,type:"radio"},model:{value:e.filter[t.value],callback:function(a){e.$set(e.filter,t.value,a)},expression:"filter[item.value]"}})],1)]],2)],1)],1),a("q-separator")],1)})),a("q-item",{attrs:{clickable:""}},[a("q-item-section",{staticStyle:{width:"100%"},on:{click:e.filterFromResult}},[e._v("在结果中筛选")])],1)],2)],1)],1),a("q-page-container",[a("q-page",{staticClass:"q-pa-sm fit row justify-center"},[a("q-markup-table",{staticStyle:{width:"100%"}},[a("thead",{staticClass:"bg-grey"},[a("tr",[a("th",{attrs:{colspan:"5"}},[a("div",{staticClass:"row wrap items-center"},[a("q-field",{staticClass:"q-ml-md text-white",attrs:{borderless:""}},[e._v(e._s(JSON.stringify(e.keyword)))])],1)])]),a("tr",[a("th",{staticClass:"text-left text-white"},[e._v("搜索结果："+e._s(e.searchResultNumber)+"条")]),a("th",{staticClass:"text-right text-white"},[a("q-btn-dropdown",{attrs:{label:"排序方式",dense:"",unelevated:""}},[a("q-list",e._l(e.sortMethods,(function(t){return a("q-item",{directives:[{name:"close-popup",rawName:"v-close-popup"}],key:t.id,attrs:{clickable:""},on:{click:function(a){return e.Sort(t)}}},[a("q-item-section",[a("q-item-label",[e._v(e._s(t.label))])],1)],1)})),1)],1)],1)])]),a("tbody",{staticStyle:{width:"100%"}},e._l(e.searchResultList,(function(e){return a("tr",{key:e.id,staticStyle:{width:"100%"}},[a("search-result",{attrs:{doc:e}})],1)})),0)]),a("q-pagination",{attrs:{max:10,"max-pages":6,"boundary-numbers":!0,"boundary-links":!0},on:{input:function(t){return e.searchPaper()}},model:{value:e.current,callback:function(t){e.current=t},expression:"current"}})],1)],1)],1)},l=[],s=(a("4de4"),a("4160"),a("a15b"),a("4e82"),a("b0c0"),a("159b"),a("d272"),a("4ec3")),o={name:"SearchLayout",data:function(){return{range:{min:0,max:100},fields:[{label:"领域",value:"fos",options:[{label:"信息",value:"op1"},{label:"医学",value:"op2"},{label:"理学",value:"op3"},{label:"经济",value:"op4"},{label:"法学",value:"op4"},{label:"文学",value:"op5"},{label:"艺术",value:"op6"},{label:"历史",value:"op7"}]},{label:"年份",value:"year",options:[{label:"2020",value:"2019_2020"},{label:"2019",value:"2018_2019"},{label:"2015-2018",value:"2015_2018"},{label:"2010-2014",value:"2010_2014"},{label:"2005-2009",value:"2005_2009"},{label:"2000-2004",value:"2000_2004"}]},{label:"作者",value:"author",options:[{label:"张三",value:"张三"}]}],leftDrawerOpen:!0,showAdvanced:!1,showDateOptions:!1,exactPhrase:"",hasWords:"",excludeWords:"",byWebsite:"",byDate:"Any time",group:"op1",filter:{fos:[],year:"",author:[]},keyword:{sort:"",any:"",all:"",exclude:"",author:"",fos:"",venue:"",pos:0,pageNum:1,yearRange:"_2020"},current:1,searchResultNumber:100,searchResultList:[{id:1,title:"计算机视觉",authors:["张三","王四"],venue:"IEEE",year:"2019",n_citation:"2020",abstract:"这是摘要"}],sortMethods:[{label:"时间升序",id:"year-asc"},{label:"时间降序",id:"year-desc"},{label:"被引量升序",id:"n_citation-asc"},{label:"被引量降序",id:"n_citation-desc"}]}},mounted:function(){this.init()},watch:{$route:{handler:function(e){console.log(e),"SearchResult"===e.name&&(this.keyword=JSON.parse(e.query.keywords),this.searchPaper())},immediate:!0,deep:!0}},methods:{init:function(){console.log(this.$route),this.keyword=JSON.parse(this.$route.query.keywords),this.searchPaper()},searchPaper:function(){var e=this;this.keyword.pageNum=this.current,Object(s["c"])(this.keyword).then((function(t){200===t.status&&(console.log(t),e.searchResultList=[],t.data.data.results.forEach((function(t){e.searchResultList.push({id:t.id,title:t.title,authors:t.authors,venue:t.venue,year:t.year,n_citation:t.n_citation,abstract:t.abstract})})),e.searchResultNumber=t.data.data.total,e.current=t.data.data.pageNum,e.totalPages=t.data.data.totalPages,e.fields.fos.options=[],t.data.data.fields.forEach((function(t){e.fields.fos.options.push({label:t.field+"("+t.num+")",value:t.field})})),e.fields.author.options=[],t.data.data.authorNames.forEach((function(t){e.fields.author.options.push({label:t,value:t})})),e.filter.author=[],e.filter.fos=[],e.filter.year="")}))},Sort:function(e){this.keyword.sort=e.id,this.searchPaper()},filterFromResult:function(){console.log(this.filter),this.keyword.fos=this.filter["fos"].join(","),this.keyword.yearRange=this.filter["year"],this.keyword.author=this.filter["author"].join(" "),this.searchPaper()}}},i=o,n=(a("19f7"),a("2877")),u=a("4d5a"),c=a("9404"),d=a("4983"),p=a("1c1c"),h=a("3b73"),f=a("f09f"),b=a("a370"),v=a("9f0a"),y=a("eb85"),m=a("66e5"),w=a("4074"),g=a("09e3"),k=a("9989"),q=a("2bb1"),_=a("8572"),x=a("f20b"),Q=a("0170"),S=a("3b16"),P=a("0016"),R=a("7f67"),C=a("eebe"),N=a.n(C),O=Object(n["a"])(i,r,l,!1,null,null,null);t["default"]=O.exports;N()(O,"components",{QLayout:u["a"],QDrawer:c["a"],QScrollArea:d["a"],QList:p["a"],QExpansionItem:h["a"],QCard:f["a"],QCardSection:b["a"],QOptionGroup:v["a"],QSeparator:y["a"],QItem:m["a"],QItemSection:w["a"],QPageContainer:g["a"],QPage:k["a"],QMarkupTable:q["a"],QField:_["a"],QBtnDropdown:x["a"],QItemLabel:Q["a"],QPagination:S["a"],QIcon:P["a"]}),N()(O,"directives",{ClosePopup:R["a"]})}}]);